"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7628],{77628:function(e,s,a){a.r(s);var i=a(85893),l=a(67294),r=a(25675),t=a.n(r),n=a(99811),c=a(45007),d=a(89387),o=a(46869),h=a(93680);function m(){let[e,s]=(0,l.useState)([]),a=(0,c.v9)(e=>e.auth),[r,d]=(0,l.useState)(null),[m,x]=(0,l.useState)(!1),[j,p]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=await n.Z.fetch('*[_type == "order" && username == "'.concat(a.name,'"]')),i=await Promise.all(e.map(async e=>{let s=await n.Z.fetch('*[_type == "product" && title == "'.concat(e.titleOfWork,'"][0]')),a=await n.Z.fetch('*[_type == "provider" && name == "'.concat(e.provider,'"][0]')),i=null==s?void 0:s.images;return{...e,productImage:i,providerData:a||""}}));s(i)}catch(e){console.error("Error fetching orders:",e)}})()},[a]);let u=async a=>{try{await n.Z.delete(a);let i=e.filter(e=>e._id!==a);s(i),alert("Order canceled successfully")}catch(e){console.error("Error canceling order:",e),alert("Failed to cancel order")}},g=async e=>{e.preventDefault(),alert("pending")};return(0,i.jsxs)("div",{className:"col-lg-9",children:[(0,i.jsx)("div",{className:"row align-items-center",children:(0,i.jsx)("div",{className:"col-md-4",children:(0,i.jsx)("div",{className:"widget-title",children:(0,i.jsx)("h4",{children:"Booking List"})})})}),(0,i.jsx)("div",{className:"booking-list",children:e.map((e,s)=>(0,i.jsxs)("div",{className:"booking-widget",children:[(0,i.jsxs)("div",{className:"booking-img",children:[(0,i.jsxs)("a",{href:"booking-details.html",children:[(0,i.jsx)(t(),{width:1024,height:100,className:"img-fluid",alt:"Demo text",src:"https://cdn.sanity.io/images/z5hb38ic/production/".concat(e.productImage.asset._ref.replace("image-","").replace(/-([^/-]*)$/,".$1"))}),"                            "]}),(0,i.jsx)("div",{className:"fav-item",children:(0,i.jsx)("a",{href:" ",className:"fav-icon",children:(0,i.jsx)("i",{className:"feather-heart"})})})]}),(0,i.jsxs)("div",{className:"booking-det-info",children:[(0,i.jsxs)("h3",{children:[(0,i.jsx)("a",{href:"booking-details.html",children:e.titleOfWork}),(0,i.jsx)("span",{className:"badge ".concat((()=>{switch(e.status){case"complete":return"badge-success";case"inprogress":return"badge-warning";default:return"badge-danger"}})()),children:(()=>{switch(e.status){case"complete":return"Order booked";case"inprogress":return"In Progress";default:return"Pending"}})()})]}),(0,i.jsxs)("ul",{className:"booking-details",children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:"book-item",children:"Booking Date"})," : ",e.workingDate]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:"book-item",children:"Working Time"})," : ",e.hoursNeeded]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:"book-item",children:"Location"})," : ",e.location]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:"book-item",children:"Payment Paid"})," :",e.providerData?e.providerData.payment.map(s=>s.title===e.titleOfWork?(0,i.jsx)("span",{children:s.price},s._id):null):"0.00"]})]})]}),(0,i.jsxs)("div",{className:"booking-action action-popup-btn",children:["pending"!=e.status&&e.status?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:["  ",(0,i.jsxs)("a",{href:"#",onClick:()=>u(e._id),className:"btn btn-primary","data-bs-toggle":"modal",children:[(0,i.jsx)("i",{className:"fas fa-times"})," Cancel Order"]})]}),(0,i.jsxs)("button",{onClick:()=>{x(!0),d(e)},className:"btn btn-primary",children:[(0,i.jsx)("i",{className:"fa-regular fa-calendar-days"}),"Reschedule"]})]})]},s))}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsxs)("div",{className:"review-entries",children:[(0,i.jsx)("span",{children:"Show"}),(0,i.jsxs)("select",{children:[(0,i.jsx)("option",{children:"10"}),(0,i.jsx)("option",{children:"25"}),(0,i.jsx)("option",{children:"50"}),(0,i.jsx)("option",{children:"100"})]}),(0,i.jsx)("span",{children:"entries"})]})}),(0,i.jsx)("div",{className:"col-sm-6",children:(0,i.jsxs)("div",{className:"review-pagination",children:[(0,i.jsx)("p",{children:"1 - 5 of 10"}),(0,i.jsxs)("ul",{className:"pagination",children:[(0,i.jsx)("li",{className:"page-item",children:(0,i.jsx)("a",{className:"page-link",href:" ;",children:"1"})}),(0,i.jsx)("li",{className:"page-item active",children:(0,i.jsxs)("a",{className:"page-link",href:" ;",children:["2 ",(0,i.jsx)("span",{className:"visually-hidden",children:"(current)"})]})}),(0,i.jsx)("li",{className:"page-item",children:(0,i.jsx)("a",{className:"page-link",href:" ;",children:"3"})})]})]})})]}),r&&(0,i.jsxs)(o.Z,{show:m,onHide:()=>x(!1),centered:!0,children:[(0,i.jsx)(o.Z.Header,{closeButton:!0,children:(0,i.jsx)(o.Z.Title,{children:"Reschedule Booking"})}),(0,i.jsx)(o.Z.Body,{children:(0,i.jsxs)("form",{onSubmit:g,children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"titleOfWork",children:"Title of Work"}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"titleOfWork",value:r.titleOfWork,readOnly:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"date",children:"Date"}),(0,i.jsx)("input",{type:"date",className:"form-control",id:"date",value:j,onChange:e=>p(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"time",children:"Time"}),(0,i.jsx)("input",{type:"time",className:"form-control",id:"time",required:!0})]}),(0,i.jsx)(h.Z,{type:"submit",variant:"primary",children:"Reschedule"})]})})]})]})}s.default=()=>(0,i.jsx)(c.zt,{store:d.Z,children:(0,i.jsx)(m,{})})}}]);